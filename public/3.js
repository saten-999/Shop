(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{23:function(e,t,s){"use strict";var n=s(5);s.n(n).a},24:function(e,t,s){(e.exports=s(2)(!1)).push([e.i,".chat-app{max-height:400px;min-height:400px;overflow-y:scroll;overflow-x:hidden}.chat-app li{list-style:none;border:1px solid grey;padding:5px;margin-top:5px;word-wrap:break-word}.composer-user{width:25%;position:fixed;bottom:0;right:15px}.admin{background-color:#d33b33;color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1;border:1px solid grey}.admin h5{color:#fff;margin-top:10px}",""])},25:function(e,t,s){"use strict";s.r(t);var n={props:{user:{type:Object,required:!0}},data:function(){return{message:"",messages:[],admin:{type:Object}}},methods:{startConversation:function(e){var t=this;e.preventDefault(),""!=this.message&&(axios.post("/admin/conversation/send",{contact_id:this.admin.id,text:this.message}).then((function(e){t.saveNewMessage(e.data)})),this.message="")},saveNewMessage:function(e){this.messages.push(e)},handleIncoming:function(e){e.from!=this.admin.id||this.saveNewMessage(e)},scrollToBottom:function(){var e=this;setTimeout((function(){var t=e.$refs.feed;t.scrollTop=t.scrollHeight}),50)}},watch:{messages:function(e){this.scrollToBottom()}},mounted:function(){var e=this;this.scrollToBottom(),window.Echo.private("messages.".concat(this.user.id)).listen("MessageSentEvent",(function(t){e.handleIncoming(t.message)})),axios.get("/chat/onlineadmin").then((function(t){e.admin=t.data[0],axios.get("/admin/conversation/".concat(e.admin.id)).then((function(t){e.messages=t.data}))}))}},i=(s(23),s(0)),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"feed",staticClass:"chat-app"},[s("div",{staticClass:"admin"},[s("h5",[e._v("Chat with "+e._s(e.admin.name)+" ")])]),e._v(" "),s("div",[e.admin?s("ul",e._l(e.messages,(function(t){return s("li",{key:t.id,class:"message"+(t.to==e.admin.id?"send":"reseved")},[s("div",{staticClass:"text"},[e._v("\n                "+e._s(t.text)+"\n            ")])])})),0):e._e(),e._v(" "),s("div",{staticClass:"composer-user"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"Message..."},domProps:{value:e.message},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startConversation(t)},input:function(t){t.target.composing||(e.message=t.target.value)}}})])])])}),[],!1,null,null,null);t.default=o.exports},5:function(e,t,s){var n=s(24);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s(3)(n,i);n.locals&&(e.exports=n.locals)}}]);